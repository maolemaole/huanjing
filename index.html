<!DOCTYPE html>

<html>

<head>

    <title>跨维通讯 - 宇宙之问</title>

    <style>

        body {

            background: #1a1a1a;

            color: #e0e0e0;

            font-family: 'Segoe UI', sans-serif;

            max-width: 600px;

            margin: 20px auto;

            padding: 20px;

        }

        #dialogue-container {

            border: 1px solid #404040;

            padding: 20px;

            border-radius: 8px;

            min-height: 300px;

            background: #2a2a2a;

        }

        .message {

            margin: 15px 0;

            opacity: 0;

            animation: fadeIn 0.5s forwards;

        }

        .options {

            margin-top: 20px;

            border-top: 1px dashed #404040;

            padding-top: 20px;

        }

        button {

            background: #3a6b8a;

            color: white;

            border: none;

            padding: 10px 20px;

            margin: 5px;

            border-radius: 4px;

            cursor: pointer;

            transition: background 0.3s;

        }

        button:hover {

            background: #4a8bb0;

        }

        @keyframes fadeIn {

            from { opacity: 0; transform: translateY(10px); }

            to { opacity: 1; transform: translateY(0); }

        }

    </style>

</head>

<body>

    <div id="dialogue-container">

        <div id="dialogue"></div>

        <div id="options" class="options"></div>

    </div>

    <script>

        // Load story from external JSON file
        let story = {};
        fetch('story.json')
            .then(response => response.json())
            .then(data => {
                story = data;
                // Initialize the game after loading the story
                showScene('start');
            })
            .catch(error => console.error('Error loading story:', error));

        let currentNode = 'start';

        function showScene(node) {

            const nodeData = story[node];

            const dialogueDiv = document.getElementById('dialogue');

            const optionsDiv = document.getElementById('options');

            // 显示对话内容

            const message = document.createElement('div');

            message.className = 'message';

            message.innerHTML = nodeData.text.replace(/\n/g, '<br>');

            dialogueDiv.appendChild(message);

            // 清空选项

            optionsDiv.innerHTML = '';

            // 创建选项按钮

            nodeData.options.forEach(option => {

                const button = document.createElement('button');

                button.textContent = option.text;

                button.onclick = () => {

                    currentNode = option.next;

                    dialogueDiv.innerHTML = '';  // 清空对话开始新分支

                    showScene(currentNode);

                };

                optionsDiv.appendChild(button);

            });

            // 自动滚动到底部

            dialogueDiv.scrollTop = dialogueDiv.scrollHeight;

        }

    </script>

</body>

</html>
